#!/bin/bash

echo "ZXhwb3J0IFZfUE9SVD0ke1ZfUE9SVDotJzgwODAnfQpleHBvcnQgQ0ZQT1JUPSR7Q0ZQT1JUOi0nNDQzJ30KZXhwb3J0IEZJTEVfUEFUSD0ke0ZJTEVfUEFUSDotJy90bXAnfQpleHBvcnQgVVVJRD0ke1VVSUQ6LSc3MTYwYjY5Ni1kZDVlLTQyZTMtYTAyNC0xNDVlOTJjZWM5MTYnfQpleHBvcnQgVkxQQVRIPSR7VkxQQVRIOi0nc3RhcnR2bCd9CmV4cG9ydCBDRl9JUD0ke0NGX0lQOi0naXAuc2InfQpleHBvcnQgT1BFTlNFUlZFUj0ke09QRU5TRVJWRVI6LScxJ30KZXhwb3J0IE9QRU5VU0NGPSR7T1BFTlVTQ0Y6LScwJ30KZXhwb3J0IE5WRVJTSU9OPSR7TlZFUlNJT046LSdWMSd9CmV4cG9ydCBOUE9SVD0ke05QT1JUOi0nNDQzJ30KCmlmIFsgISAtZCAiJEZJTEVfUEFUSCIgXTsgdGhlbgogIG1rZGlyIC1wICIke0ZJTEVfUEFUSH0iCmZpCgpjbGVhbnVwX2ZpbGVzKCkgewogIHJtIC1yZiAke0ZJTEVfUEFUSH0vKgp9CgojIERvd25sb2FkIERlcGVuZGVuY3kgRmlsZXMKZG93bmxvYWRfcHJvZ3JhbSgpIHsKICBsb2NhbCBwcm9ncmFtX25hbWU9IiQxIgogIGxvY2FsIGRlZmF1bHRfdXJsPSIkMiIKICBsb2NhbCB4NjRfdXJsPSIkMyIKCiAgbG9jYWwgZG93bmxvYWRfdXJsCiAgY2FzZSAiJCh1bmFtZSAtbSkiIGluCiAgICB4ODZfNjR8YW1kNjR8eDY0KQogICAgICBkb3dubG9hZF91cmw9IiR7eDY0X3VybH0iCiAgICAgIDs7CiAgICAqKQogICAgICBkb3dubG9hZF91cmw9IiR7ZGVmYXVsdF91cmx9IgogICAgICA7OwogIGVzYWMKCiAgaWYgWyAhIC1mICIke3Byb2dyYW1fbmFtZX0iIF07IHRoZW4KICAgIGlmIFsgLW4gIiR7ZG93bmxvYWRfdXJsfSIgXTsgdGhlbgogICAgICBlY2hvICJEb3dubG9hZGluZyAke3Byb2dyYW1fbmFtZX0uLi4iID4gL2Rldi9udWxsCiAgICAgIGlmIGNvbW1hbmQgLXYgY3VybCAmPiAvZGV2L251bGw7IHRoZW4KICAgICAgICBjdXJsIC1zU0wgIiR7ZG93bmxvYWRfdXJsfSIgLW8gIiR7cHJvZ3JhbV9uYW1lfSIKICAgICAgZWxpZiBjb21tYW5kIC12IHdnZXQgJj4gL2Rldi9udWxsOyB0aGVuCiAgICAgICAgd2dldCAtcU8gIiR7cHJvZ3JhbV9uYW1lfSIgIiR7ZG93bmxvYWRfdXJsfSIKICAgICAgZmkKICAgICAgZWNobyAiRG93bmxvYWRlZCAke3Byb2dyYW1fbmFtZX0iID4gL2Rldi9udWxsCiAgICBlbHNlCiAgICAgIGVjaG8gIlNraXBwaW5nIGRvd25sb2FkIGZvciAke3Byb2dyYW1fbmFtZX0iID4gL2Rldi9udWxsCiAgICBmaQogIGVsc2UKICAgIGVjaG8gIiR7cHJvZ3JhbV9uYW1lfSBhbHJlYWR5IGV4aXN0cywgc2tpcHBpbmcgZG93bmxvYWQiID4gL2Rldi9udWxsCiAgZmkKfQoKaW5pdGlhbGl6ZV9kb3dubG9hZHMoKSB7CiAgaWYgWyAtbiAiJHtOU0VSVkVSfSIgXSAmJiBbIC1uICIke05LRVl9IiBdOyB0aGVuCiAgICBjYXNlICIke05WRVJTSU9OfSIgaW4KICAgICAgIlYwIiApCiAgICAgICAgZG93bmxvYWRfcHJvZ3JhbSAiJHtGSUxFX1BBVEh9L25wbSIgImh0dHBzOi8vZ2l0aHViLmNvbS9rYWh1bmFtYS9teWZpbGUvcmVsZWFzZXMvZG93bmxvYWQvbWFpbi9uZXpoYS1hZ2VudF9hcm0iICJodHRwczovL2dpdGh1Yi5jb20va2FodW5hbWEvbXlmaWxlL3JlbGVhc2VzL2Rvd25sb2FkL21haW4vbmV6aGEtYWdlbnQiCiAgICAgICAgOzsKICAgICAgIlYxIiApCiAgICAgICAgZG93bmxvYWRfcHJvZ3JhbSAiJHtGSUxFX1BBVEh9L25wbSIgImh0dHBzOi8vZ2l0aHViLmNvbS9teXRjZ2QvbXlmaWxlcy9yZWxlYXNlcy9kb3dubG9hZC9tYWluL25lemhhLWFnZW50djFfYXJtIiAiaHR0cHM6Ly9naXRodWIuY29tL215dGNnZC9teWZpbGVzL3JlbGVhc2VzL2Rvd25sb2FkL21haW4vbmV6aGEtYWdlbnR2MSIKICAgICAgICA7OwogICAgZXNhYwogICAgc2xlZXAgMwogICAgY2htb2QgK3ggJHtGSUxFX1BBVEh9L25wbQogIGZpCgogIGRvd25sb2FkX3Byb2dyYW0gIiR7RklMRV9QQVRIfS93ZWIiICJodHRwczovL2dpdGh1Yi5jb20vbXl0Y2dkL215ZmlsZXMvcmVsZWFzZXMvZG93bmxvYWQvbWFpbi94cmF5X2FybSIgImh0dHBzOi8vZ2l0aHViLmNvbS9teXRjZ2QvbXlmaWxlcy9yZWxlYXNlcy9kb3dubG9hZC9tYWluL3hyYXkiCiAgc2xlZXAgMwogIGNobW9kICt4ICR7RklMRV9QQVRIfS93ZWIKCiAgaWYgWyAiJHtPUEVOU0VSVkVSfSIgLWVxIDEgXTsgdGhlbgogICAgZG93bmxvYWRfcHJvZ3JhbSAiJHtGSUxFX1BBVEh9L3NlcnZlciIgImh0dHBzOi8vZ2l0aHViLmNvbS9jbG91ZGZsYXJlL2Nsb3VkZmxhcmVkL3JlbGVhc2VzL2xhdGVzdC9kb3dubG9hZC9jbG91ZGZsYXJlZC1saW51eC1hcm02NCIgImh0dHBzOi8vZ2l0aHViLmNvbS9jbG91ZGZsYXJlL2Nsb3VkZmxhcmVkL3JlbGVhc2VzL2xhdGVzdC9kb3dubG9hZC9jbG91ZGZsYXJlZC1saW51eC1hbWQ2NCIKICAgIHNsZWVwIDMKICAgIGNobW9kICt4ICR7RklMRV9QQVRIfS9zZXJ2ZXIKICBmaQp9CgojIG15X2NvbmZpZwpteV9jb25maWcoKSB7CiAgZ2VuZXJhdGVfY29uZmlnKCkgewogIGNhdCA+ICR7RklMRV9QQVRIfS9vdXQuanNvbiA8PCBFT0YKewogICAgImxvZyI6IHsKICAgICAgICAiYWNjZXNzIjogIi9kZXYvbnVsbCIsCiAgICAgICAgImVycm9yIjogIi9kZXYvbnVsbCIsCiAgICAgICAgImxvZ2xldmVsIjogIm5vbmUiCiAgICB9LAogICAgImRucyI6IHsKICAgICAgICAic2VydmVycyI6IFsKICAgICAgICAgICAgImh0dHBzK2xvY2FsOi8vOC44LjguOC9kbnMtcXVlcnkiCiAgICAgICAgXQogICAgfSwKICAgICJpbmJvdW5kcyI6IFsKICAgICAgICB7CiAgICAgICAgICAgICJwb3J0IjogJHtWX1BPUlR9LAogICAgICAgICAgICAibGlzdGVuIjogIjo6IiwKICAgICAgICAgICAgInByb3RvY29sIjogInZsZXNzIiwKICAgICAgICAgICAgInNldHRpbmdzIjogewogICAgICAgICAgICAgICAgImNsaWVudHMiOiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAiaWQiOiAiJHtVVUlEfSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJsZXZlbCI6IDAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgImRlY3J5cHRpb24iOiAibm9uZSIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgInN0cmVhbVNldHRpbmdzIjogewogICAgICAgICAgICAgICAgIm5ldHdvcmsiOiAid3MiLAogICAgICAgICAgICAgICAgInNlY3VyaXR5IjogIm5vbmUiLAogICAgICAgICAgICAgICAgIndzU2V0dGluZ3MiOiB7CiAgICAgICAgICAgICAgICAgICAgInBhdGgiOiAiLyR7VkxQQVRIfSIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgInNuaWZmaW5nIjogewogICAgICAgICAgICAgICAgImVuYWJsZWQiOiB0cnVlLAogICAgICAgICAgICAgICAgImRlc3RPdmVycmlkZSI6IFsKICAgICAgICAgICAgICAgICAgICAiaHR0cCIsCiAgICAgICAgICAgICAgICAgICAgInRscyIsCiAgICAgICAgICAgICAgICAgICAgInF1aWMiCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgIm1ldGFkYXRhT25seSI6IGZhbHNlCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICBdLAogICAgIm91dGJvdW5kcyI6IFsKICAgICAgICB7CiAgICAgICAgICAgICJ0YWciOiAiZGlyZWN0IiwKICAgICAgICAgICAgInByb3RvY29sIjogImZyZWVkb20iCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICAgICJ0YWciOiAiYmxvY2siLAogICAgICAgICAgICAicHJvdG9jb2wiOiAiYmxhY2tob2xlIgogICAgICAgIH0KICAgIF0KfQpFT0YKICB9CgogIHZfdHlwZSgpIHsKICAgIGlmIFsgLWUgIiR7RklMRV9QQVRIfS9zZXJ2ZXIiIF0gJiYgWyAteiAiJHtWX0FVVEh9IiBdICYmIFsgLXogIiR7Vl9ET01BSU59IiBdOyB0aGVuCiAgICAgIGVjaG8gIlZfQVVUSCBvciBWX0RPTUFJTiBpcyBlbXB0eSwgdXNlIFF1aWNrIFR1bm5lbHMiID4gL2Rldi9udWxsCiAgICAgIHJldHVybgogICAgZmkKCiAgICBpZiBbIC1lICIke0ZJTEVfUEFUSH0vc2VydmVyIiBdICYmIFsgLW4gIiQoZWNobyAiJHtWX0FVVEh9IiB8IGdyZXAgVHVubmVsU2VjcmV0KSIgXTsgdGhlbgogICAgICBlY2hvICR7Vl9BVVRIfSA+ICR7RklMRV9QQVRIfS90dW5uZWwuanNvbgogICAgICBjYXQgPiAke0ZJTEVfUEFUSH0vdHVubmVsLnltbCA8PCBFT0YKdHVubmVsPSQoZWNobyAiJHtWX0FVVEh9IiB8IGN1dCAtZFwiIC1mMTIpCmNyZWRlbnRpYWxzLWZpbGU6ICR7RklMRV9QQVRIfS90dW5uZWwuanNvbgpwcm90b2NvbDogaHR0cDIKCmluZ3Jlc3M6CiAgLSBob3N0bmFtZTogJHtWX0RPTUFJTn0KICAgIHNlcnZpY2U6IGh0dHA6Ly9sb2NhbGhvc3Q6ICR7Vl9QT1JUfQogICAgb3JpZ2luUmVxdWVzdDoKICAgICAgbm9UTFNWZXJpZnk6IHRydWUKICAtIHNlcnZpY2U6IGh0dHBfc3RhdHVzOjQwNApFT0YKICAgIGVsc2UKICAgICAgZWNobyAiVl9BVVRIIE1pc21hdGNoIFR1bm5lbFNlY3JldCIgPiAvZGV2L251bGwKICAgIGZpCiAgfQoKICBhcmdzKCkgewogICAgY2FzZSAiJE9QRU5VU0NGIiBpbgogICAgICAiMCIgKQogICAgICAgIGlmIFsgJHtPUEVOU0VSVkVSfSAtZXEgMSBdICYmIFsgLWUgIiR7RklMRV9QQVRIfS9zZXJ2ZXIiIF07IHRoZW4KICAgICAgICAgIGlmIFsgLW4gIiQoZWNobyAiJFZfQVVUSCIgfCBncmVwICdeW0EtWjAtOWEtej1dXHsxMjAsMjUwXH0kJykiIF07IHRoZW4KICAgICAgICAgICAgYXJncz0idHVubmVsIC0tZWRnZS1pcC12ZXJzaW9uIGF1dG8gLS1uby1hdXRvdXBkYXRlIC0tcHJvdG9jb2wgaHR0cDIgcnVuIC0tdG9rZW4gJHtWX0FVVEh9IgogICAgICAgICAgZWxpZiBbIC1uICIkKGVjaG8gIiRWX0FVVEgiIHwgZ3JlcCBUdW5uZWxTZWNyZXQpIiBdOyB0aGVuCiAgICAgICAgICAgIGFyZ3M9InR1bm5lbCAtLWVkZ2UtaXAtdmVyc2lvbiBhdXRvIC0tY29uZmlnICR7RklMRV9QQVRIfS90dW5uZWwueW1sIHJ1biIKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgYXJncz0idHVubmVsIC0tZWRnZS1pcC12ZXJzaW9uIGF1dG8gLS1uby1hdXRvdXBkYXRlIC0tcHJvdG9jb2wgaHR0cDIgLS1sb2dmaWxlICR7RklMRV9QQVRIfS9ib290LmxvZyAtLWxvZ2xldmVsIGluZm8gLS11cmwgaHR0cDovL2xvY2FsaG9zdDoke1ZfUE9SVH0iCiAgICAgICAgICBmaQogICAgICAgIGZpCiAgICAgICAgOzsKICAgICAgIjEiICkKICAgICAgICBpZiBbICR7T1BFTlNFUlZFUn0gLWVxIDEgXSAmJiBbIC1lICIke0ZJTEVfUEFUSH0vc2VydmVyIiBdOyB0aGVuCiAgICAgICAgICBpZiBbIC1uICIkKGVjaG8gIiRWX0FVVEgiIHwgZ3JlcCAnXltBLVowLTlhLXo9XVx7MTIwLDI1MFx9JCcpIiBdOyB0aGVuCiAgICAgICAgICAgIGFyZ3M9InR1bm5lbCAtLXJlZ2lvbiB1cyAtLWVkZ2UtaXAtdmVyc2lvbiBhdXRvIC0tbm8tYXV0b3VwZGF0ZSAtLXByb3RvY29sIGh0dHAyIHJ1biAtLXRva2VuICR7Vl9BVVRIfSIKICAgICAgICAgIGVsaWYgWyAtbiAiJChlY2hvICIkVl9BVVRIIiB8IGdyZXAgVHVubmVsU2VjcmV0KSIgXTsgdGhlbgogICAgICAgICAgICBhcmdzPSJ0dW5uZWwgLS1yZWdpb24gdXMgLS1lZGdlLWlwLXZlcnNpb24gYXV0byAtLWNvbmZpZyAke0ZJTEVfUEFUSH0vdHVubmVsLnltbCBydW4iCiAgICAgICAgICBlbHNlCiAgICAgICAgICAgIGFyZ3M9InR1bm5lbCAtLXJlZ2lvbiB1cyAtLWVkZ2UtaXAtdmVyc2lvbiBhdXRvIC0tbm8tYXV0b3VwZGF0ZSAtLXByb3RvY29sIGh0dHAyIC0tbG9nZmlsZSAke0ZJTEVfUEFUSH0vYm9vdC5sb2cgLS1sb2dsZXZlbCBpbmZvIC0tdXJsIGh0dHA6Ly9sb2NhbGhvc3Q6JHtWX1BPUlR9IgogICAgICAgICAgZmkKICAgICAgICBmaQogICAgICAgIDs7CiAgICBlc2FjCiAgfQoKICBnZW5lcmF0ZV9jb25maWcKICB2X3R5cGUKICBhcmdzCn0KCiMgZ2VuZXJhdGVfcG0yX2ZpbGUKZ2VuZXJhdGVfcG0yX2ZpbGUoKSB7CiAgc2VydmVyX3JhbmRvbW5lc3M9JCh0ciAtZGMgJ0EtWmEtejAtOScgPC9kZXYvdXJhbmRvbSB8IGhlYWQgLWMgNSkKICB3ZWJfcmFuZG9tbmVzcz0kKHRyIC1kYyAnQS1aYS16MC05JyA8L2Rldi91cmFuZG9tIHwgaGVhZCAtYyA1KQogIG5wbV9yYW5kb21uZXNzPSQodHIgLWRjICdBLVphLXowLTknIDwvZGV2L3VyYW5kb20gfCBoZWFkIC1jIDUpCgogIGlmIFsgIiR7T1BFTlNFUlZFUn0iIC1lcSAxIF0gJiYgWyAtZSAiJHtGSUxFX1BBVEh9L3NlcnZlciIgXTsgdGhlbgogICAgbXYgJHtGSUxFX1BBVEh9L3NlcnZlciAke0ZJTEVfUEFUSH0vJHtzZXJ2ZXJfcmFuZG9tbmVzc30gJiYgc2xlZXAgMQogIGZpCiAgaWYgWyAtZSAiJHtGSUxFX1BBVEh9L3dlYiIgXTsgdGhlbgogICAgbXYgJHtGSUxFX1BBVEh9L3dlYiAke0ZJTEVfUEFUSH0vJHt3ZWJfcmFuZG9tbmVzc30gJiYgc2xlZXAgMQogIGZpCgogIGlmIFsgLW4gIiR7TlNFUlZFUn0iIF0gJiYgWyAtbiAiJHtOS0VZfSIgXSAmJiBbIC1lICIke0ZJTEVfUEFUSH0vbnBtIiBdOyB0aGVuCiAgICBtdiAke0ZJTEVfUEFUSH0vbnBtICR7RklMRV9QQVRIfS8ke25wbV9yYW5kb21uZXNzfQogICAgY2FzZSAiJE5WRVJTSU9OIiBpbgogICAgICAiVjAiICkKICAgICAgICB0bHNQb3J0cz0oIjQ0MyIgIjg0NDMiICIyMDk2IiAiMjA4NyIgIjIwODMiICIyMDUzIikKICAgICAgICBpZiBbWyAiICR7dGxzUG9ydHNbQF19ICIgPX4gIiAke05QT1JUfSAiIF1dOyB0aGVuCiAgICAgICAgICBOVExTPSItLXRscyIKICAgICAgICBlbHNlCiAgICAgICAgICBOVExTPSIiCiAgICAgICAgZmkKICAgICAgICBOUlVOUz0iJHtGSUxFX1BBVEh9LyR7bnBtX3JhbmRvbW5lc3N9IC1zICR7TlNFUlZFUn06JHtOUE9SVH0gLXAgJHtOS0VZfSAke05UTFN9IC0tcmVwb3J0LWRlbGF5PTQgLS1kaXNhYmxlLWF1dG8tdXBkYXRlIgogICAgICAgIDs7CiAgICAgICJWMSIgKQogICAgICAgIHRsc1BvcnRzPSgiNDQzIiAiODQ0MyIgIjIwOTYiICIyMDg3IiAiMjA4MyIgIjIwNTMiKQogICAgICAgIGlmIFtbICIgJHt0bHNQb3J0c1tAXX0gIiA9fiAiICR7TlBPUlR9ICIgXV07IHRoZW4KICAgICAgICAgIE5UTFM9InRydWUiCiAgICAgICAgZWxzZQogICAgICAgICAgTlRMUz0iZmFsc2UiCiAgICAgICAgZmkKICAgICAgICBjYXQgPiAke0ZJTEVfUEFUSH0vY29uZmlnLnltbCA8PCBBQkMKY2xpZW50X3NlY3JldDogJE5LRVkKZGVidWc6IGZhbHNlCmRpc2FibGVfYXV0b191cGRhdGU6IHRydWUKZGlzYWJsZV9jb21tYW5kX2V4ZWN1dGU6IGZhbHNlCmRpc2FibGVfZm9yY2VfdXBkYXRlOiB0cnVlCmRpc2FibGVfbmF0OiBmYWxzZQpkaXNhYmxlX3NlbmRfcXVlcnk6IGZhbHNlCmdwdTogZmFsc2UKaW5zZWN1cmVfdGxzOiBmYWxzZQppcF9yZXBvcnRfcGVyaW9kOiAxODAwCnJlcG9ydF9kZWxheTogNApzZXJ2ZXI6ICROU0VSVkVSOiROUE9SVApza2lwX2Nvbm5lY3Rpb25fY291bnQ6IGZhbHNlCnNraXBfcHJvY3NfY291bnQ6IGZhbHNlCnRlbXBlcmF0dXJlOiBmYWxzZQp0bHM6ICROVExTCnVzZV9naXRlZV90b191cGdyYWRlOiBmYWxzZQp1c2VfaXB2Nl9jb3VudHJ5X2NvZGU6IGZhbHNlCnV1aWQ6ICRVVUlECkFCQwogICAgICAgIE5SVU5TPSIke0ZJTEVfUEFUSH0vJHtucG1fcmFuZG9tbmVzc30gLWMgJHtGSUxFX1BBVEh9L2NvbmZpZy55bWwiCiAgICAgICAgOzsKICAgIGVzYWMKICBmaQoKICBjYXQgPiAke0ZJTEVfUEFUSH0vZWNvc3lzdGVtLmNvbmZpZy5qcyA8PCBBQkMKbW9kdWxlLmV4cG9ydHMgPSB7CiAgImFwcHMiOlsKICAgICAgewogICAgICAgICAgIm5hbWUiOiJ3ZWIiLAogICAgICAgICAgInNjcmlwdCI6IiR7RklMRV9QQVRIfS8ke3dlYl9yYW5kb21uZXNzfSBydW4gLWMgJHtGSUxFX1BBVEh9L291dC5qc29uIgpBQkMKICBpZiBbICIke09QRU5TRVJWRVJ9IiAtZXEgMSBdOyB0aGVuCiAgICBjYXQgPj4gJHtGSUxFX1BBVEh9L2Vjb3N5c3RlbS5jb25maWcuanMgPDwgREVGCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAgICJuYW1lIjoic2VydmVyIiwKICAgICAgICAgICJzY3JpcHQiOiIke0ZJTEVfUEFUSH0vJHtzZXJ2ZXJfcmFuZG9tbmVzc30gJHthcmdzfSIsCkRFRgogIGZpCiAgaWYgWyAtbiAiJHtOU0VSVkVSfSIgXSAmJiBbIC1uICIke05LRVl9IiBdOyB0aGVuCiAgICBjYXQgPj4gJHtGSUxFX1BBVEh9L2Vjb3N5c3RlbS5jb25maWcuanMgPDwgR0hJCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAgICJuYW1lIjoibnBtIiwKICAgICAgICAgICJzY3JpcHQiOiIke05SVU5TfSIsCkdISQogIGZpCiAgY2F0ID4+ICR7RklMRV9QQVRIfS9lY29zeXN0ZW0uY29uZmlnLmpzIDw8IEpLTAogICAgICB9CiAgXQp9CkpLTAp9CgojIHJ1bgpydW5fcHJvY2Vzc2VzKCkgewogIGdlbmVyYXRlX3BtMl9maWxlCgogIGlmIFsgLWUgIiR7RklMRV9QQVRIfS9lY29zeXN0ZW0uY29uZmlnLmpzIiBdOyB0aGVuCiAgICBwbTIgc3RhcnQgJHtGSUxFX1BBVEh9L2Vjb3N5c3RlbS5jb25maWcuanMKICBmaQoKICBzbGVlcCAzMAoKICBleHBvcnQgSVNQPSQoY3VybCAtcyBodHRwczovL2lwY29uZmlnLmRlNS5uZXQpICAgIyDmmL7npLpJU1Dlj4rlm73lrrbnroDnp7AgIGV4cG9ydCBJU1A9JChjdXJsIC1zIGh0dHBzOi8vc3BlZWQuY2xvdWRmbGFyZS5jb20vbWV0YSB8IGF3ayAtRlwiICd7cHJpbnQgJDI2Ii0iJDE4fScgfCBzZWQgLWUgJ3MvIC9fL2cnKSAmJiBzbGVlcCAxCiAgY2hlY2tfaG9zdG5hbWVfY2hhbmdlICYmIHNsZWVwIDIKCiAgaWYgWyAtbiAiJFNVUkwiIF07IHRoZW4KICAgIHVwbG9hZCA+L2Rldi9udWxsIDI+JjEgJgogIGVsc2UKICAgIGJ1aWxkX3VybHMKICBmaQp9CgojIGNoZWNrX2hvc3RuYW1lCmNoZWNrX2hvc3RuYW1lX2NoYW5nZSgpIHsKICBpZiBbIC1zICIke0ZJTEVfUEFUSH0vYm9vdC5sb2ciIF07IHRoZW4KICAgIGV4cG9ydCBWX0RPTUFJTj0kKGNhdCAke0ZJTEVfUEFUSH0vYm9vdC5sb2cgfCBncmVwIC1vICJpbmZvLipodHRwczovLy4qdHJ5Y2xvdWRmbGFyZS5jb20iIHwgc2VkICJzQC4qaHR0cHM6Ly9AQGciIHwgdGFpbCAtbiAxKQogIGZpCiAgaWYgWyAtbiAiJHtNWV9ET01BSU59IiBdICYmIFsgLXogIiR7Vl9ET01BSU59IiBdOyB0aGVuCiAgICBleHBvcnQgVl9ET01BSU49IiR7TVlfRE9NQUlOfSIKICBmaQogIGV4cG9ydCBVUExPQURfREFUQT0idmxlc3M6Ly8ke1VVSUR9QCR7Q0ZfSVB9OiR7Q0ZQT1JUfT9ob3N0PSR7Vl9ET01BSU59JnBhdGg9JTJGJHtWTFBBVEh9JTNGZWQlM0QyMDQ4JnR5cGU9d3MmZW5jcnlwdGlvbj1ub25lJnNlY3VyaXR5PXRscyZzbmk9JHtWX0RPTUFJTn0jJHtJU1B9LSR7U05BTUV9Igp9CgojIGJ1aWxkX3VybHMKYnVpbGRfdXJscygpIHsKICBpZiBbIC1uICIke1VQTE9BRF9EQVRBfSIgXTsgdGhlbgogICAgZWNobyAtZSAiJHtVUExPQURfREFUQX0iIHwgYmFzZTY0IHwgdHIgLWQgJ1xuJyA+ICIke0ZJTEVfUEFUSH0vbG9nLnR4dCIKICBmaQp9CgojIHVwbG9hZAp1cGxvYWRfc3Vic2NyaXB0aW9uKCkgewogIGlmIGNvbW1hbmQgLXYgY3VybCAmPiAvZGV2L251bGw7IHRoZW4KICAgIHJlc3BvbnNlPSQoY3VybCAtcyAtWCBQT1NUIC1IICJDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb24iIC1kICJ7XCJVUkxfTkFNRVwiOlwiJFNOQU1FXCIsXCJVUkxcIjpcIiRVUExPQURfREFUQVwifSIgJFNVUkwpCiAgZWxpZiBjb21tYW5kIC12IHdnZXQgJj4gL2Rldi9udWxsOyB0aGVuCiAgICByZXNwb25zZT0kKHdnZXQgLXFPLSAtLXBvc3QtZGF0YT0ie1wiVVJMX05BTUVcIjpcIiRTTkFNRVwiLFwiVVJMXCI6XCIkVVBMT0FEX0RBVEFcIn0iIC0taGVhZGVyPSJDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb24iICRTVVJMKQogIGZpCn0KCmV4cG9ydCBwcmV2aW91c2FyZ29Eb21haW49IiIKdXBsb2FkKCkgewogIGlmIFsgJHtPUEVOU0VSVkVSfSAtZXEgMSBdICYmIFsgLXogIiR7Vl9BVVRIfSIgXTsgdGhlbgogICAgd2hpbGUgdHJ1ZTsgZG8KICAgICAgaWYgW1sgIiRwcmV2aW91c2FyZ29Eb21haW4iID09ICIkVl9ET01BSU4iIF1dOyB0aGVuCiAgICAgICAgZWNobyAiZG9tYWluIG5hbWUgaGFzIG5vdCBiZWVuIHVwZGF0ZWQsIG5vIG5lZWQgdG8gdXBsb2FkIiA+IC9kZXYvbnVsbAogICAgICBlbHNlCiAgICAgICAgdXBsb2FkX3N1YnNjcmlwdGlvbgogICAgICAgIGJ1aWxkX3VybHMKICAgICAgICBleHBvcnQgcHJldmlvdXNhcmdvRG9tYWluPSIkVl9ET01BSU4iCiAgICAgIGZpCiAgICAgIHNsZWVwIDYwCiAgICAgIGNoZWNrX2hvc3RuYW1lX2NoYW5nZSAmJiBzbGVlcCAyCiAgICBkb25lCiAgZWxzZQogICAgdXBsb2FkX3N1YnNjcmlwdGlvbgogICAgYnVpbGRfdXJscwogIGZpCn0KCiMgbWFpbgptYWluKCkgewogIGNsZWFudXBfZmlsZXMKICBpbml0aWFsaXplX2Rvd25sb2FkcwogIG15X2NvbmZpZwogIHJ1bl9wcm9jZXNzZXMKfQptYWlu" | base64 -d | bash
